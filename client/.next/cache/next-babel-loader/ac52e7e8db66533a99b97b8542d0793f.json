{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/maram/Desktop/1testpfa11/flask-nextjs-user-management-example2.0/client/pages/_app.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _callSuper(_this, derived, args) {\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    } catch (e) {\n      return false;\n    }\n  }\n\n  derived = _getPrototypeOf(derived);\n  return _possibleConstructorReturn(_this, isNativeReflectConstruct() ? Reflect.construct(derived, args || [], _getPrototypeOf(_this).constructor) : derived.apply(_this, args));\n}\n\nimport App from \"next/app\";\nimport Router from \"next/router\";\nimport NProgress from \"nprogress\";\nimport { Header } from \"components/layout\";\nimport { ErrorBoundary } from \"components/error-boundary\";\nimport { ProvideAuth, AuthToken, TOKEN_STORAGE_NAME } from \"utils/auth\";\nimport { Container } from \"reactstrap\";\nimport nookies from \"nookies\";\n\nvar CustomApp = /*#__PURE__*/function (_App) {\n  function CustomApp() {\n    _classCallCheck(this, CustomApp);\n\n    return _callSuper(this, CustomApp, arguments);\n  }\n\n  _inherits(CustomApp, _App);\n\n  return _createClass(CustomApp, [{\n    key: \"auth\",\n    get: function get() {\n      if (this.props.auth) {\n        // the server pass to the client serializes the token\n        // so we have to reinitialize the authToken class\n        //\n        // @see https://github.com/zeit/next.js/issues/3536\n        return new AuthToken(this.props.auth.token);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Router.events.on(\"routeChangeComplete\", function () {\n        NProgress.start();\n      });\n      Router.events.on(\"routeChangeComplete\", function () {\n        return NProgress.done();\n      });\n      Router.events.on(\"routeChangeError\", function () {\n        return NProgress.done();\n      });\n    }\n  }, {\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, errorInfo) {\n      _get(_getPrototypeOf(CustomApp.prototype), \"componentDidCatch\", this).call(this, error, errorInfo);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          Component = _this$props.Component,\n          pageProps = _this$props.pageProps;\n      return __jsx(ProvideAuth, {\n        auth: this.auth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 7\n        }\n      }, __jsx(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }\n      }), __jsx(ErrorBoundary, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }\n      }, __jsx(Container, {\n        className: \"mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }\n      }, __jsx(Component, _extends({}, pageProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }\n      })))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var Component, ctx, token, initialProps, auth;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              Component = _ref.Component, ctx = _ref.ctx;\n              token = nookies.get(ctx)[TOKEN_STORAGE_NAME];\n              initialProps = {};\n\n              if (token) {\n                auth = new AuthToken(token);\n                initialProps = {\n                  auth: auth\n                };\n              }\n\n              if (!Component.getInitialProps) {\n                _context.next = 6;\n                break;\n              }\n\n              return _context.abrupt(\"return\", Component.getInitialProps(ctx, initialProps));\n\n            case 6:\n              return _context.abrupt(\"return\", initialProps);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n}(App);\n\nexport { CustomApp as default };","map":{"version":3,"sources":["/home/maram/Desktop/1testpfa11/flask-nextjs-user-management-example2.0/client/pages/_app.tsx"],"names":["App","Router","NProgress","Header","ErrorBoundary","ProvideAuth","AuthToken","TOKEN_STORAGE_NAME","Container","nookies","CustomApp","props","auth","token","events","on","start","done","error","errorInfo","Component","pageProps","ctx","get","initialProps","getInitialProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,UAAhB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,kBAAjC,QAA2D,YAA3D;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,OAAOC,OAAP,MAAoB,SAApB;;IAMqBC,S;;;;;;;;;;;SAenB,eAAW;AACT,UAAI,KAAKC,KAAL,CAAWC,IAAf,EAAqB;AACnB;AACA;AACA;AACA;AACA,eAAO,IAAIN,SAAJ,CAAc,KAAKK,KAAL,CAAWC,IAAX,CAAgBC,KAA9B,CAAP;AACD;;AACD,aAAO,IAAP;AACD;;;WAED,6BAAoB;AAClBZ,MAAAA,MAAM,CAACa,MAAP,CAAcC,EAAd,CAAiB,qBAAjB,EAAwC,YAAM;AAC5Cb,QAAAA,SAAS,CAACc,KAAV;AACD,OAFD;AAIAf,MAAAA,MAAM,CAACa,MAAP,CAAcC,EAAd,CAAiB,qBAAjB,EAAwC;AAAA,eAAMb,SAAS,CAACe,IAAV,EAAN;AAAA,OAAxC;AACAhB,MAAAA,MAAM,CAACa,MAAP,CAAcC,EAAd,CAAiB,kBAAjB,EAAqC;AAAA,eAAMb,SAAS,CAACe,IAAV,EAAN;AAAA,OAArC;AACD;;;WAED,2BAAkBC,KAAlB,EAA8BC,SAA9B,EAA8C;AAC5C,uFAAwBD,KAAxB,EAA+BC,SAA/B;AACD;;;WAED,kBAAS;AACP,wBAAiC,KAAKR,KAAtC;AAAA,UAAQS,SAAR,eAAQA,SAAR;AAAA,UAAmBC,SAAnB,eAAmBA,SAAnB;AAEA,aACE,MAAC,WAAD;AAAa,QAAA,IAAI,EAAE,KAAKT,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,SAAD;AAAW,QAAA,SAAS,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,SAAD,eAAeS,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,CADF,CAFF,CADF;AAUD;;;;sFAnDD;AAAA;AAAA;AAAA;AAAA;AAA+BD,cAAAA,SAA/B,QAA+BA,SAA/B,EAA0CE,GAA1C,QAA0CA,GAA1C;AACQT,cAAAA,KADR,GACgBJ,OAAO,CAACc,GAAR,CAAYD,GAAZ,EAAiBf,kBAAjB,CADhB;AAEMiB,cAAAA,YAFN,GAEqB,EAFrB;;AAGE,kBAAIX,KAAJ,EAAW;AACHD,gBAAAA,IADG,GACI,IAAIN,SAAJ,CAAcO,KAAd,CADJ;AAETW,gBAAAA,YAAY,GAAG;AAAEZ,kBAAAA,IAAI,EAAJA;AAAF,iBAAf;AACD;;AANH,mBAOMQ,SAAS,CAACK,eAPhB;AAAA;AAAA;AAAA;;AAAA,+CAQWL,SAAS,CAACK,eAAV,CAA0BH,GAA1B,EAA+BE,YAA/B,CARX;;AAAA;AAAA,+CAWSA,YAXT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;EADqCxB,G;;SAAlBU,S","sourcesContent":["import App from \"next/app\";\nimport Router from \"next/router\";\nimport NProgress from \"nprogress\";\nimport { Header } from \"components/layout\";\nimport { ErrorBoundary } from \"components/error-boundary\";\nimport { ProvideAuth, AuthToken, TOKEN_STORAGE_NAME } from \"utils/auth\";\nimport { Container } from \"reactstrap\";\nimport nookies from \"nookies\";\n\ntype CustomAppProps = {\n  auth?: AuthToken;\n};\n\nexport default class CustomApp extends App<CustomAppProps> {\n  static async getInitialProps({ Component, ctx }) {\n    const token = nookies.get(ctx)[TOKEN_STORAGE_NAME];\n    let initialProps = {};\n    if (token) {\n      const auth = new AuthToken(token);\n      initialProps = { auth };\n    }\n    if (Component.getInitialProps) {\n      return Component.getInitialProps(ctx, initialProps);\n    }\n\n    return initialProps;\n  }\n\n  get auth() {\n    if (this.props.auth) {\n      // the server pass to the client serializes the token\n      // so we have to reinitialize the authToken class\n      //\n      // @see https://github.com/zeit/next.js/issues/3536\n      return new AuthToken(this.props.auth.token);\n    }\n    return null;\n  }\n\n  componentDidMount() {\n    Router.events.on(\"routeChangeComplete\", () => {\n      NProgress.start();\n    });\n\n    Router.events.on(\"routeChangeComplete\", () => NProgress.done());\n    Router.events.on(\"routeChangeError\", () => NProgress.done());\n  }\n\n  componentDidCatch(error: any, errorInfo: any) {\n    super.componentDidCatch(error, errorInfo);\n  }\n\n  render() {\n    const { Component, pageProps } = this.props;\n\n    return (\n      <ProvideAuth auth={this.auth}>\n        <Header />\n        <ErrorBoundary>\n          <Container className=\"mt-3\">\n            <Component {...pageProps} />\n          </Container>\n        </ErrorBoundary>\n      </ProvideAuth>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}