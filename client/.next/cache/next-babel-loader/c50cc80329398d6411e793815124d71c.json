{"ast":null,"code":"import { Api } from \"./api\";\nimport { getGeneralApiProblem } from \"./api/api-problem\";\nexport class UserApi extends Api {\n  convertUser(raw) {\n    return {\n      id: raw.id,\n      firstName: raw.firstName,\n      lastName: raw.lastName,\n      email: raw.email,\n      admin: raw.admin,\n      active: raw.active\n    };\n  }\n  async getUserById(token, id) {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response = await this.apisauce.get(`/api/v1/users/${id}`);\n    if (!response.ok) {\n      console.log(id);\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n    try {\n      const user = response.data.data;\n      return {\n        kind: \"ok\",\n        user: user\n      };\n    } catch {\n      return {\n        kind: \"bad-data\"\n      };\n    }\n  }\n  async getUsers(token) {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response = await this.apisauce.get(\"/api/v1/users\");\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n    try {\n      const rawUsers = response.data;\n      const resultUsers = rawUsers.map(this.convertUser);\n      return {\n        kind: \"ok\",\n        users: resultUsers\n      };\n    } catch {\n      return {\n        kind: \"bad-data\"\n      };\n    }\n  }\n}","map":{"version":3,"names":["Api","getGeneralApiProblem","UserApi","convertUser","raw","id","firstName","lastName","email","admin","active","getUserById","token","apisauce","setHeader","response","get","ok","console","log","problem","user","data","kind","getUsers","rawUsers","resultUsers","map","users"],"sources":["/usr/src/app/services/users.ts"],"sourcesContent":["import { Api } from \"./api\";\nimport { ApiResponse } from \"apisauce\";\nimport { GeneralApiProblem, getGeneralApiProblem } from \"./api/api-problem\";\nimport { User } from \"./types\";\n\nexport type GetUsersResult = { kind: \"ok\"; users: User[] } | GeneralApiProblem;\nexport type GetUserResult = { kind: \"ok\"; user: User } | GeneralApiProblem;\n\nexport class UserApi extends Api {\n  convertUser(raw: any): User {\n    return {\n      id: raw.id,\n      firstName: raw.firstName,\n      lastName: raw.lastName,\n      email: raw.email,\n      admin: raw.admin,\n      active: raw.active,\n    };\n  }\n\n  async getUserById(token: string, id: number): Promise<GetUserResult> {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response: ApiResponse<any> = await this.apisauce.get(\n      `/api/v1/users/${id}`\n    );\n\n    if (!response.ok) {\n      console.log(id)\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n\n    try {\n      const user: User = response.data.data;\n      return { kind: \"ok\", user: user };\n    } catch {\n      return { kind: \"bad-data\" };\n    }\n  }\n\n  async getUsers(token: string): Promise<GetUsersResult> {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response: ApiResponse<any> = await this.apisauce.get(\"/api/v1/users\");\n\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n\n    try {\n      const rawUsers = response.data;\n      const resultUsers: User[] = rawUsers.map(this.convertUser);\n      return { kind: \"ok\", users: resultUsers };\n    } catch {\n      return { kind: \"bad-data\" };\n    }\n  }\n}\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,OAAO;AAE3B,SAA4BC,oBAAoB,QAAQ,mBAAmB;AAM3E,OAAO,MAAMC,OAAO,SAASF,GAAG,CAAC;EAC/BG,WAAWA,CAACC,GAAQ,EAAQ;IAC1B,OAAO;MACLC,EAAE,EAAED,GAAG,CAACC,EAAE;MACVC,SAAS,EAAEF,GAAG,CAACE,SAAS;MACxBC,QAAQ,EAAEH,GAAG,CAACG,QAAQ;MACtBC,KAAK,EAAEJ,GAAG,CAACI,KAAK;MAChBC,KAAK,EAAEL,GAAG,CAACK,KAAK;MAChBC,MAAM,EAAEN,GAAG,CAACM;IACd,CAAC;EACH;EAEA,MAAMC,WAAWA,CAACC,KAAa,EAAEP,EAAU,EAA0B;IACnE,IAAI,CAACQ,QAAQ,CAACC,SAAS,CAAC,eAAe,EAAG,UAASF,KAAM,EAAC,CAAC;IAC3D,MAAMG,QAA0B,GAAG,MAAM,IAAI,CAACF,QAAQ,CAACG,GAAG,CACvD,iBAAgBX,EAAG,EACtB,CAAC;IAED,IAAI,CAACU,QAAQ,CAACE,EAAE,EAAE;MAChBC,OAAO,CAACC,GAAG,CAACd,EAAE,CAAC;MACf,MAAMe,OAAO,GAAGnB,oBAAoB,CAACc,QAAQ,CAAC;MAC9C,IAAIK,OAAO,EAAE,OAAOA,OAAO;IAC7B;IAEA,IAAI;MACF,MAAMC,IAAU,GAAGN,QAAQ,CAACO,IAAI,CAACA,IAAI;MACrC,OAAO;QAAEC,IAAI,EAAE,IAAI;QAAEF,IAAI,EAAEA;MAAK,CAAC;IACnC,CAAC,CAAC,MAAM;MACN,OAAO;QAAEE,IAAI,EAAE;MAAW,CAAC;IAC7B;EACF;EAEA,MAAMC,QAAQA,CAACZ,KAAa,EAA2B;IACrD,IAAI,CAACC,QAAQ,CAACC,SAAS,CAAC,eAAe,EAAG,UAASF,KAAM,EAAC,CAAC;IAC3D,MAAMG,QAA0B,GAAG,MAAM,IAAI,CAACF,QAAQ,CAACG,GAAG,CAAC,eAAe,CAAC;IAE3E,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAMG,OAAO,GAAGnB,oBAAoB,CAACc,QAAQ,CAAC;MAC9C,IAAIK,OAAO,EAAE,OAAOA,OAAO;IAC7B;IAEA,IAAI;MACF,MAAMK,QAAQ,GAAGV,QAAQ,CAACO,IAAI;MAC9B,MAAMI,WAAmB,GAAGD,QAAQ,CAACE,GAAG,CAAC,IAAI,CAACxB,WAAW,CAAC;MAC1D,OAAO;QAAEoB,IAAI,EAAE,IAAI;QAAEK,KAAK,EAAEF;MAAY,CAAC;IAC3C,CAAC,CAAC,MAAM;MACN,OAAO;QAAEH,IAAI,EAAE;MAAW,CAAC;IAC7B;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module"}