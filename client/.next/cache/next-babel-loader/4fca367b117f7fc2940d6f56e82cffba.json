{"ast":null,"code":"/**\r\n * Attempts to get a common cause of problems from an api response.\r\n *\r\n * @param response The api response.\r\n */\nexport function getGeneralApiProblem(response) {\n  switch (response.problem) {\n    case \"CONNECTION_ERROR\":\n      return {\n        kind: \"cannot-connect\",\n        temporary: true\n      };\n    case \"NETWORK_ERROR\":\n      return {\n        kind: \"cannot-connect\",\n        temporary: true\n      };\n    case \"TIMEOUT_ERROR\":\n      return {\n        kind: \"timeout\",\n        temporary: true\n      };\n    case \"SERVER_ERROR\":\n      return {\n        kind: \"server\"\n      };\n    case \"UNKNOWN_ERROR\":\n      return {\n        kind: \"unknown\",\n        temporary: true\n      };\n    case \"CLIENT_ERROR\":\n      switch (response.status) {\n        case 401:\n          return {\n            kind: \"unauthorized\"\n          };\n        case 403:\n          return {\n            kind: \"forbidden\"\n          };\n        case 404:\n          return {\n            kind: \"not-found\"\n          };\n        default:\n          return {\n            kind: \"rejected\"\n          };\n      }\n    case \"CANCEL_ERROR\":\n      return null;\n  }\n  return null;\n}","map":{"version":3,"names":["getGeneralApiProblem","response","problem","kind","temporary","status"],"sources":["/usr/src/app/services/api/api-problem.ts"],"sourcesContent":["import { ApiResponse } from \"apisauce\";\r\n\r\nexport type GeneralApiProblem =\r\n  /**\r\n   * Times up.\r\n   */\r\n  | { kind: \"timeout\"; temporary: true }\r\n  /**\r\n   * Cannot connect to the server for some reason.\r\n   */\r\n  | { kind: \"cannot-connect\"; temporary: true }\r\n  /**\r\n   * The server experienced a problem. Any 5xx error.\r\n   */\r\n  | { kind: \"server\" }\r\n  /**\r\n   * We're not allowed because we haven't identified ourself. This is 401.\r\n   */\r\n  | { kind: \"unauthorized\" }\r\n  /**\r\n   * We don't have access to perform that request. This is 403.\r\n   */\r\n  | { kind: \"forbidden\" }\r\n  /**\r\n   * Unable to find that resource.  This is a 404.\r\n   */\r\n  | { kind: \"not-found\" }\r\n  /**\r\n   * All other 4xx series errors.\r\n   */\r\n  | { kind: \"rejected\" }\r\n  /**\r\n   * Something truly unexpected happened. Most likely can try again. This is a catch all.\r\n   */\r\n  | { kind: \"unknown\"; temporary: true }\r\n  /**\r\n   * The data we received is not in the expected format.\r\n   */\r\n  | { kind: \"bad-data\" };\r\n\r\n/**\r\n * Attempts to get a common cause of problems from an api response.\r\n *\r\n * @param response The api response.\r\n */\r\nexport function getGeneralApiProblem(\r\n  response: ApiResponse<any>\r\n): GeneralApiProblem | void {\r\n  switch (response.problem) {\r\n    case \"CONNECTION_ERROR\":\r\n      return { kind: \"cannot-connect\", temporary: true };\r\n    case \"NETWORK_ERROR\":\r\n      return { kind: \"cannot-connect\", temporary: true };\r\n    case \"TIMEOUT_ERROR\":\r\n      return { kind: \"timeout\", temporary: true };\r\n    case \"SERVER_ERROR\":\r\n      return { kind: \"server\" };\r\n    case \"UNKNOWN_ERROR\":\r\n      return { kind: \"unknown\", temporary: true };\r\n    case \"CLIENT_ERROR\":\r\n      switch (response.status) {\r\n        case 401:\r\n          return { kind: \"unauthorized\" };\r\n        case 403:\r\n          return { kind: \"forbidden\" };\r\n        case 404:\r\n          return { kind: \"not-found\" };\r\n        default:\r\n          return { kind: \"rejected\" };\r\n      }\r\n    case \"CANCEL_ERROR\":\r\n      return null;\r\n  }\r\n\r\n  return null;\r\n}\r\n"],"mappings":"AAwCA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,oBAAoBA,CAClCC,QAA0B,EACA;EAC1B,QAAQA,QAAQ,CAACC,OAAO;IACtB,KAAK,kBAAkB;MACrB,OAAO;QAAEC,IAAI,EAAE,gBAAgB;QAAEC,SAAS,EAAE;MAAK,CAAC;IACpD,KAAK,eAAe;MAClB,OAAO;QAAED,IAAI,EAAE,gBAAgB;QAAEC,SAAS,EAAE;MAAK,CAAC;IACpD,KAAK,eAAe;MAClB,OAAO;QAAED,IAAI,EAAE,SAAS;QAAEC,SAAS,EAAE;MAAK,CAAC;IAC7C,KAAK,cAAc;MACjB,OAAO;QAAED,IAAI,EAAE;MAAS,CAAC;IAC3B,KAAK,eAAe;MAClB,OAAO;QAAEA,IAAI,EAAE,SAAS;QAAEC,SAAS,EAAE;MAAK,CAAC;IAC7C,KAAK,cAAc;MACjB,QAAQH,QAAQ,CAACI,MAAM;QACrB,KAAK,GAAG;UACN,OAAO;YAAEF,IAAI,EAAE;UAAe,CAAC;QACjC,KAAK,GAAG;UACN,OAAO;YAAEA,IAAI,EAAE;UAAY,CAAC;QAC9B,KAAK,GAAG;UACN,OAAO;YAAEA,IAAI,EAAE;UAAY,CAAC;QAC9B;UACE,OAAO;YAAEA,IAAI,EAAE;UAAW,CAAC;MAC/B;IACF,KAAK,cAAc;MACjB,OAAO,IAAI;EACf;EAEA,OAAO,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module"}